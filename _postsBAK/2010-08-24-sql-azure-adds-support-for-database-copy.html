--- 
layout: post
title: SQL Azure Adds Support for Database Copy
categories: 
- SQL Azure
- Windows Azure Platform
tags: []

status: publish
type: post
published: true
meta: 
  dsq_thread_id: "609686008"
---
<p>The SQL Azure team has announced SQL Azure Service Update 4, which includes database copy, an improved help system, and deployment of Microsoft Project Code-Named “Houston” to multiple data centers.&#160; See the <a href="http://blogs.msdn.com/b/sqlazure/archive/2010/08/24/10053883.aspx" target="_blank">SQL Azure Team Blog</a> for the formal announcement.</p>  <p>Customers have been asking for a way to backup databases with SQL Azure for a long time, and the new database copy capabilities will provide a lot of support.&#160; From the SQL Azure Team Blog:</p>  <blockquote>   <p><strong>Support for database copy:</strong> Database copy allows you to make a real-time complete snapshot of your database into a different server in the data center. This new copy feature is the first step in backup support for SQL Azure, allowing you to get a complete backup of any SQL Azure database before making schema or database changes to the source database. The ability to snapshot a database easily is our top requested feature for SQL Azure, and goes above and beyond our database center replication to keep your data always available. The MSDN Documentation with more information is entitled: <a href="http://msdn.microsoft.com/en-us/library/ff951624.aspx" target="_blank">Copying Databases in SQL Azure</a>.</p> </blockquote>  <p>Good stuff.&#160; So, if you want to rename a database, you can do this …</p>  <div style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; padding-left: 5px; width: 500px; padding-right: 5px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px">   <pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"><span style="color: #008000">// Rename a database</span></pre>

  <pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">ALTER DATABASE database1 modify name=database2</pre>
</div>

<p>
  <br />… if you want to make a copy of a database, you can do this …</p>

<div style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; padding-left: 5px; width: 500px; padding-right: 5px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px">
  <pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"><span style="color: #008000">// Create a consistent copy of a database</span></pre>

  <pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">CREATE DATABASE database2 AS COPY OF database1</pre>
</div>

<p>
  <br />… and finally, if you want to track the copy progress of a database, you can do this …</p>

<div style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; padding-left: 5px; width: 500px; padding-right: 5px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px">
  <pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"><span style="color: #008000">// Keep track of the copy progress</span></pre>

  <pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">SELECT * FROM sys.dm_database_copies</pre>
</div>

<p>
  <br />There is also some great <a href="http://msdn.microsoft.com/en-us/library/ee621787.aspx" target="_blank">“How-To” documentation</a> that’s been published to MSDN that you should take a look at:</p>

<ul>
  <p><a href="http://msdn.microsoft.com/en-us/library/ee336282.aspx">Guidelines for Connecting to SQL Azure Database</a> 

    <br /><a href="http://msdn.microsoft.com/en-us/library/ee336280.aspx">How to: Connect to SQL Azure Using sqlcmd</a> 

    <br /><a href="http://msdn.microsoft.com/en-us/library/ee336243.aspx">How to: Connect to SQL Azure Using ADO.NET</a> 

    <br /><a href="http://msdn.microsoft.com/en-us/library/ee621781.aspx">How to: Connect to SQL Azure Through ASP.NET</a> 

    <br /><a href="http://msdn.microsoft.com/en-us/library/ee621789.aspx">How to: Connect to SQL Azure Through WCF (ADO.NET) Data Services</a> 

    <br /><a href="http://msdn.microsoft.com/en-us/library/ff394110.aspx">How to: Connect to SQL Azure Using PHP</a> 

    <br /><a href="http://msdn.microsoft.com/en-us/library/ff951633.aspx">How to: Connect to SQL Azure Using the ADO.NET Entity Framework</a></p>
</ul>

<p>And don’t forget about “Houston”.&#160; <a href="http://blogs.msdn.com/b/sqlazure/archive/2010/07/26/10042571.aspx" target="_blank">Microsoft project Microsoft Project Code-Named “Houston” (Houston)</a> is a light weight web-based database management tool for SQL Azure. Houston, which runs on top of Windows Azure is now available in multiple datacenters reducing the latency between the application and your SQL Azure database.</p>

<p>Enjoy!</p>
