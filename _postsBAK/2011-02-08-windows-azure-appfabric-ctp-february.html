--- 
layout: post
title: Windows Azure AppFabric CTP February, Caching Enhancements, and the New LABS Portal
categories: 
- Caching
- CTP
- Windows Azure
- Windows Azure AppFabric
tags: []

status: publish
type: post
published: true
meta: 
  _edit_last: "1"
  disable_wpautop: "1"
  disable_wptexturize: "0"
  disable_convert_chars: "0"
  disable_convert_smilies: "0"
  _wp_old_slug: windows-azure-appfabric-ctp-february-caching-enhancements-and-the-new-labs-portal
  dsq_thread_id: "609466313"
---
<p>I’m excited to tell you about the Windows Azure AppFabric CTP February release.&#160; There are a number of enhancements and improvements coming with this release, including:</p>  <ul>   <li>New <strong>Silverlight-based LABS portal</strong>, bringing consistency with the production Windows Azure portal. </li>    <li>Ability to select either a <strong>128MB or 256MB cache size</strong>. </li>    <li>Ability to <strong>dynamically upgrade or downgrade</strong> your cache size. </li>    <li><strong>Improved diagnostics</strong> with client side tracing and client request tracking capabilities. </li>    <li>Overall <strong>performance improvements</strong>. </li> </ul>  <p>When you land on the new portal page you’ll see an experience consistent with the production Windows Azure portal – in fact, this release moves us one step closer to merging the Windows Azure AppFabric portal experiences into the same portal as Windows Azure and SQL Azure.</p>  <p>In the LABS portal, the CTP environment only lights-up <strong>Service Bus, Access Control &amp; Caching</strong>.</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/Picture-0.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Picture 0" border="0" alt="Picture 0" src="http://images.wadewegner.com/wordpress/2011/02/Picture-0_thumb.png" width="633" height="484" /></a></p>  <p>Once you select <strong>Service Bus, Access Control &amp; Caching</strong>, you’ll land on the primary Windows Azure AppFabric page, where you can get access to SDKs, documentation, and other help &amp; resources.</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/Picture-1.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Picture 1" border="0" alt="Picture 1" src="http://images.wadewegner.com/wordpress/2011/02/Picture-1_thumb.png" width="633" height="484" /></a></p>  <p>Be sure download the updated Windows Azure AppFabric SDK – you can find it at <a href="http://go.microsoft.com/fwlink/?LinkID=184288">http://go.microsoft.com/fwlink/?LinkID=184288</a> (or click the link on the portal).</p>  <blockquote>   <p><strong>Note</strong>: Make sure you don’t have the Windows Server AppFabric Cache already installed on your machine. While the API is symmetric, the current assemblies are not compatible. In fact, the Windows Server AppFabric GAC’s the Caching assemblies, so your application will load the wrong assemblies. This will be resolved by the time the service goes into production, but for now it causes a bit of friction.</p> </blockquote>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/image.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.wadewegner.com/wordpress/2011/02/image_thumb.png" width="260" height="73" /></a></p>  <p>To create a Cache, select the <strong>Cache</strong> under <strong>AppFabric</strong> …</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/image1.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.wadewegner.com/wordpress/2011/02/image_thumb1.png" width="119" height="83" /></a></p>  <p>… and then click <strong>New Namespace</strong>.&#160; In doing so you will have to create a labs subscription.</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/Picture-2.5.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Picture 2.5" border="0" alt="Picture 2.5" src="http://images.wadewegner.com/wordpress/2011/02/Picture-2.5_thumb.png" width="404" height="186" /></a></p>  <p>Note that if you do not select <strong>Cache</strong> and instead stay at the top of the tree on <strong>AppFabric</strong> you will only create <strong>Access Control</strong> and <strong>Service Bus</strong> in your namespace.</p>  <p>In the CTP, you only have control over the <strong>Service Namespace</strong> and the <strong>Cache Size</strong> – the other options are bound to the defaults.</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/Picture-3a.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Picture 3a" border="0" alt="Picture 3a" src="http://images.wadewegner.com/wordpress/2011/02/Picture-3a_thumb.png" width="404" height="176" /></a></p>  <p>For the option size, your choices are <strong>128MB Cache</strong> and <strong>256MB Cache</strong>.&#160; When this service moves into production, more cache sizes will be made available.&#160; Once you have made your selection, click <strong>OK</strong> to create your cache.</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/Picture-6.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Picture 6" border="0" alt="Picture 6" src="http://images.wadewegner.com/wordpress/2011/02/Picture-6_thumb.png" width="633" height="484" /></a></p>  <p>It only takes about 10-15 seconds to provision your cache in the background.&#160; When complete, you have a fully functional, distributed cache available to your applications.&#160; That’s all it takes!&#160; This is the magic of the Platform-as-a-Service model – if you were to have done this yourself in a set of Windows Azure instances, I guarantee it would take you a LOT more than 10-15 seconds.</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/Picture-7.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Picture 7" border="0" alt="Picture 7" src="http://images.wadewegner.com/wordpress/2011/02/Picture-7_thumb.png" width="633" height="484" /></a></p>  <p>Once the cache is provisioned, you can expand the <strong>Properties</strong> to get specific information about your cache.&#160; This provides you useful information such as <strong>Namespace</strong>, <strong>Service URL</strong>, <strong>Service Port</strong>, and <strong>Authentication Token</strong>.</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/Picture-10a.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Picture 10a" border="0" alt="Picture 10a" src="http://images.wadewegner.com/wordpress/2011/02/Picture-10a_thumb.png" width="224" height="282" /></a></p>  <p>There are a few more capabilities now available from the portal – specifically, <strong>Access Control Service</strong>, <strong>View Client Configuration</strong>, and <strong>Change Cache Size</strong>.&#160; If you take a look at <strong>Change Cache Size</strong>, you’ll see that you can switch between a 128MB and 256 MB Cache once a day (note that the functionality is disabled if you’ve already performed this operation).</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/Picture-9a.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Picture 9a" border="0" alt="Picture 9a" src="http://images.wadewegner.com/wordpress/2011/02/Picture-9a_thumb.png" width="404" height="297" /></a></p>  <p>In addition to changing the cache size, you can also grab the client configuration XML from <strong>View Client Configuration</strong>.</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/Picture-8a.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Picture 8a" border="0" alt="Picture 8a" src="http://images.wadewegner.com/wordpress/2011/02/Picture-8a_thumb.png" width="404" height="301" /></a></p>  <p>This configuration is extremely valuable for when you’re developing your application, as you can leverage this code directly in your App.Config or Web.Config file.&#160; In fact, go ahead </p>  <p>To begin, let’s create a simple Console Application using C#. Once created, be sure and update the project so that it targets the full .NET Framework instead of the Client Profile. You’ll also need to add the Caching assemblies, which can typically be found under C:Program FilesWindows Azure AppFabric SDKV2.0AssembliesCache. For now, add the following two assemblies:</p>  <ul>   <li>Microsoft.ApplicationServer.Caching.Client </li>    <li>Microsoft.ApplicationServer.Caching.Core </li> </ul>  <p>Open up the App.Config and paste in the configuration from the portal.&#160; Once added, it should look like the following:</p>  <p>   <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:e3b03198-5687-44db-b264-7eb1d8b41a9c" class="wlWriterEditableSmartContent"> <div class="le-pavsc-container"> <div class="le-pavsc-titleblock">Code Snippet</div> <div style="background: #ddd; overflow: auto"> <ol style="background: #ffffff; margin: 0 0 0 2.5em; padding: 0 0 0 5px;"> <li><span style="color:#0000ff">&lt;?</span><span style="color:#a31515">xml</span><span style="color:#0000ff"> </span><span style="color:#ff0000">version</span><span style="color:#0000ff">=</span>&quot;<span style="color:#0000ff">1.0</span>&quot;<span style="color:#0000ff">?&gt;</span></li> <li class="even"><span style="color:#0000ff">&lt;</span><span style="color:#a31515">configuration</span><span style="color:#0000ff">&gt;</span></li> <li>  <span style="color:#0000ff">&lt;</span><span style="color:#a31515">configSections</span><span style="color:#0000ff">&gt;</span></li> <li class="even">    <span style="color:#0000ff">&lt;</span><span style="color:#a31515">section</span><span style="color:#0000ff"> </span><span style="color:#ff0000">name</span><span style="color:#0000ff">=</span>&quot;<span style="color:#0000ff">dataCacheClient</span>&quot;<span style="color:#0000ff"> </span><span style="color:#ff0000">type</span><span style="color:#0000ff">=</span>&quot;<span style="color:#0000ff">Microsoft.ApplicationServer.Caching.DataCacheClientSection, Microsoft.ApplicationServer.Caching.Core</span>&quot;<span style="color:#0000ff"> </span><span style="color:#ff0000">allowLocation</span><span style="color:#0000ff">=</span>&quot;<span style="color:#0000ff">true</span>&quot;<span style="color:#0000ff"> </span><span style="color:#ff0000">allowDefinition</span><span style="color:#0000ff">=</span>&quot;<span style="color:#0000ff">Everywhere</span>&quot;<span style="color:#0000ff">/&gt;</span></li> <li>  <span style="color:#0000ff">&lt;/</span><span style="color:#a31515">configSections</span><span style="color:#0000ff">&gt;</span></li> <li class="even">  <span style="color:#0000ff">&lt;</span><span style="color:#a31515">dataCacheClient</span><span style="color:#0000ff"> </span><span style="color:#ff0000">deployment</span><span style="color:#0000ff">=</span>&quot;<span style="color:#0000ff">Simple</span>&quot;<span style="color:#0000ff">&gt;</span></li> <li>    <span style="color:#0000ff">&lt;</span><span style="color:#a31515">hosts</span><span style="color:#0000ff">&gt;</span></li> <li class="even">      <span style="color:#0000ff">&lt;</span><span style="color:#a31515">host</span><span style="color:#0000ff"> </span><span style="color:#ff0000">name</span><span style="color:#0000ff">=</span>&quot;<span style="color:#0000ff">YOURCACHE.cache.appfabriclabs.com</span>&quot;<span style="color:#0000ff"> </span><span style="color:#ff0000">cachePort</span><span style="color:#0000ff">=</span>&quot;<span style="color:#0000ff">22233</span>&quot;<span style="color:#0000ff"> /&gt;</span></li> <li>    <span style="color:#0000ff">&lt;/</span><span style="color:#a31515">hosts</span><span style="color:#0000ff">&gt;</span></li> <li class="even">    <span style="color:#0000ff">&lt;</span><span style="color:#a31515">securityProperties</span><span style="color:#0000ff"> </span><span style="color:#ff0000">mode</span><span style="color:#0000ff">=</span>&quot;<span style="color:#0000ff">Message</span>&quot;<span style="color:#0000ff">&gt;</span></li> <li>      <span style="color:#0000ff">&lt;</span><span style="color:#a31515">messageSecurity</span></li> <li class="even">          <span style="color:#0000ff"></span><span style="color:#ff0000">authorizationInfo</span><span style="color:#0000ff">=</span>&quot;<span style="color:#0000ff">YOURTOKEN</span>&quot;<span style="color:#0000ff">&gt;</span></li> <li>      <span style="color:#0000ff">&lt;/</span><span style="color:#a31515">messageSecurity</span><span style="color:#0000ff">&gt;</span></li> <li class="even">    <span style="color:#0000ff">&lt;/</span><span style="color:#a31515">securityProperties</span><span style="color:#0000ff">&gt;</span></li> <li>  <span style="color:#0000ff">&lt;/</span><span style="color:#a31515">dataCacheClient</span><span style="color:#0000ff">&gt;</span></li> <li class="even"><span style="color:#0000ff">&lt;/</span><span style="color:#a31515">configuration</span><span style="color:#0000ff">&gt;</span></li> </ol> </div> </div> </div> </p>  <p>Now let’s update the Main method of our Console application with a very simple demonstration:</p>    <p>   <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:c82a4cb3-9db7-4e3e-b900-486291077144" class="wlWriterEditableSmartContent"> <div class="le-pavsc-container"> <div class="le-pavsc-titleblock">Code Snippet</div> <div style="background: #ddd; overflow: auto"> <ol style="background: #ffffff; margin: 0 0 0 2.5em; padding: 0 0 0 5px;"> <li><span style="color:#0000ff">static</span> <span style="color:#0000ff">void</span> Main(<span style="color:#0000ff">string</span>[] args)</li> <li class="even">{</li> <li>    <span style="color:#008000">// setup the DataCacheFactory using the app.config settings</span></li> <li class="even">    <span style="color:#2b91af">DataCacheFactory</span> dataCacheFactory = <span style="color:#0000ff">new</span> <span style="color:#2b91af">DataCacheFactory</span>();</li> <li>&nbsp;</li> <li class="even">    <span style="color:#008000">// get the default cache client </span></li> <li>    <span style="color:#2b91af">DataCache</span> dataCache = dataCacheFactory.GetDefaultCache();</li> <li class="even">&nbsp;</li> <li>    <span style="color:#008000">// enter a value to store in the cache</span></li> <li class="even">    <span style="color:#2b91af">Console</span>.Write(<span style="color:#a31515">&quot;Enter a value: &quot;</span>);</li> <li>    <span style="color:#0000ff">string</span> value = <span style="color:#2b91af">Console</span>.ReadLine();</li> <li class="even">&nbsp;</li> <li>    <span style="color:#008000">// put your value in the cache</span></li> <li class="even">    dataCache.Put(<span style="color:#a31515">&quot;key&quot;</span>, value);</li> <li>&nbsp;</li> <li class="even">    <span style="color:#008000">// get your value out of the cache</span></li> <li>    <span style="color:#0000ff">string</span> response = (<span style="color:#0000ff">string</span>)dataCache.Get(<span style="color:#a31515">&quot;key&quot;</span>);</li> <li class="even">&nbsp;</li> <li>    <span style="color:#008000">// write the value</span></li> <li class="even">    <span style="color:#2b91af">Console</span>.WriteLine(<span style="color:#a31515">&quot;Your value: &quot;</span> + response);</li> <li>}</li> </ol> </div> </div> </div> </p>  <p>You can see that all we have to do is create a new instance of the DataCacheFactory, and all the configuration settings in the app.config file are read in by default.&#160; The end result is a simple Console application:</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/02/Picture-11.png"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Picture 11" border="0" alt="Picture 11" src="http://images.wadewegner.com/wordpress/2011/02/Picture-11_thumb.png" width="644" height="327" /></a></p>  <p>A simple demonstration, but hopefully valuable.</p>  <p>Please take a look at the <a href="http://portal.appfabriclabs.com/" target="_blank">Windows Azure AppFabric CTP February release</a> as soon as possible, and explore the new capabilities and features provided in the Caching service.</p>
