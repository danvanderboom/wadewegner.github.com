--- 
layout: post
title: Cannot create database 'DevelopmentStorageDb20110816' for the Windows Azure Storage Emulator
categories: 
- Scripts
- Storage Emulator
- Windows Azure
- Windows Azure Storage
tags: []

status: publish
type: post
published: true
meta: 
  _topsy_long_url: http://www.wadewegner.com/2012/01/cannot-create-database-developmentstoragedb20110816-in-storage-emulator-azure-sdk/
  topsy_short_url: http://bit.ly/z1oB0M
  dsq_thread_id: "609466518"
---
<p>Have you seen this error before? If you’ve spent any time with the Windows Azure storage emulator it’s highly probable. Here’s the full text:</p>  <pre class="code">    Added reservation for http://127.0.0.1:10000/ in user account COMPUTER\User.
    Added reservation for http://127.0.0.1:10001/ in user account COMPUTER\User.
    Added reservation for http://127.0.0.1:10002/ in user account COMPUTER\User.

    Creating database DevelopmentStorageDb20110816...
    Cannot create database 'DevelopmentStorageDb20110816' : CREATE DATABASE permission
    denied in database 'master'.

    One or more initialization actions have failed. Resolve these errors before attempting
    to run the storage emulator again. These errors can occur if SQL Server was installed
    by someone other than the current user. Please refer to
    http://go.microsoft.com/fwlink/?LinkID=205140 for more details.</pre>

<p>And an image of the error:</p>

<p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Development Storage initialization error" border="0" alt="Development Storage initialization error" src="http://images.wadewegner.com/wordpress/2012/01/SQLError.png" width="484" height="370" /></p>

<p>This error can occur when running the storage emulator (or running DSINIT.exe) for the first time. The compute emulator needs to initialize itself, which includes creating a local SQL Server database that is used to store data for local Windows Azure storage. The above error indicates that there’s a permissions when trying to create the database.</p>

<p>There are a number of ways to resolve this issue and, like others, I have my favorite approach. I have a script that I run which will add the executing user to the SQL Server sysadmin role.</p>

<p>I've published the entire script here: <a href="https://gist.github.com/1677788">https://gist.github.com/1677788</a>. Simply download and unzip the file. Open up an elevated command prompt and execute the file (i.e. run <strong>addselftosqlsysadmin.cmd</strong>). Once the script is executed the user can successfully initialize the storage emulator.</p>
<script src="https://gist.github.com/1677788.js?file=addselftosqlsysadmin.cmd"></script>

<p>I hope this helps!</p>
