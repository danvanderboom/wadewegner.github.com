--- 
layout: post
title: Running the Windows Azure Tools & SDK on the Windows Developer Preview
categories: 
- Tips
- Tools
- Troubleshooting
- Windows 8
- Windows Azure
- Windows Azure Platform
tags: []

status: publish
type: post
published: true
meta: 
  _topsy_long_url: http://www.wadewegner.com/2011/09/running-the-windows-azure-tools-sdk-on-windows-8/
  topsy_short_url: http://bit.ly/ogFCVW
  dsq_thread_id: "609466224"
---
<p>Now that we can get our hands on the Windows Developer Preview of Windows 8, I’m sure everyone is excited to start building applications! For many of us, this means that we’ll want to install all of the great Windows Azure tools on our Windows Developer Preview machine – especially if we plan to take advantage of the new <a href="http://watwindows8.codeplex.com/" target="_blank">Windows Azure Toolkit for Windows 8</a>. However, there are a few things we’ll need to do in order to get things to work.</p>  <p>Quickly let me explain the three challenges you’ll run into:</p>  <ol>   <li>The current Windows Azure Tools for Visual Studio do not yet support Dev11 – you’ll have to install Visual Studio 2010. </li>    <li>There are a few quirks getting dependencies for IIS installed on Windows 8 using the Web Platform Installer. </li>    <li>After Visual Studio 2010 and the Windows Azure Tools for Visual Studio are installed on a machine with Dev11, the Windows Azure tools will grab an environmental path variable that points to 11.0 instead of 10.0. </li> </ol>  <p>Fortunately, these things are pretty easy to resolve and will certainly get addressed in later builds.</p>  <p>Here’s what you’ll have to do to get the tools and SDK working with the Windows Developer Preview:</p>  <ol>   <li>Install <strong>Microsoft .NET Framework 3.5.1</strong>. Easiest way is to type “Windows Features”, select <strong>Settings</strong>, and select <strong>Turn Windows features on or off</strong>. Then simply check the checkbox. Click <strong>OK</strong> to install.       <br /><img style="background-image: none; border-right-width: 0px; margin: 10px 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Step 1 - .NET 3.5.1" border="0" alt="Step 1 - .NET 3.5.1" src="http://images.wadewegner.com/wordpress/2011/09/Step-1-.NET-3.5.1.png" width="344" height="301" /> </li>    <li>Next we need to correctly configure IIS. Typically we’d do this through the Web Platform Installer, but this doesn’t work correctly on Windows 8. From <strong>Turn Windows features on or off</strong> you’ll need to do the following, then click <strong>OK</strong> to install.       <ul>       <li>Check <strong>Internet Information Services</strong>. </li>        <li>Expand <strong>Internet Information Services</strong> and <strong>World Wide Web Services</strong>. </li>        <li>Expand <strong>Application Development Features</strong> and check <strong>ASP.NET 2.0</strong>, <strong>ASP.NET 4.5</strong>, and <strong>CGI</strong>. </li>        <li>Expand <strong>Common HTTP Features</strong> and check <strong>HTTP Redirection</strong>. </li>        <li>Expand <strong>Health and Diagnostics</strong> and check <strong>Logging Tools</strong>, <strong>Request Monitor</strong>, and <strong>Tracing</strong>. </li>     </ul>   </li>    <li>Install the <strong><a href="http://www.microsoft.com/web/downloads/platform.aspx" target="_blank">Web Platform Installer</a> (WebPI)</strong>. </li>    <li>Install <strong>Visual Web Developer 2010 Express</strong> through <strong>WebPI</strong>. (You can use a different version of Visual Studio 2010, so long as it’s supported by the Windows Azure Tools for Visual Studio.) </li>    <li>Install <strong>Windows Azure Tools for Microsoft Visual Studio 2010 – September 2011</strong> through <strong>WebPI</strong>. </li> </ol>  <p>Okay, now you have everything installed. However, before you trying running Visual Studio, you have to create a script to launch Visual Studio 2010. This is because the Windows Azure tools use an environmental variable that’s incorrectly pointing to version 11.0, and we’ll need to change it right before we launch to version 10.0 (for Visual Studio 2010).</p>  <pre class="code">@ECHO OFF

SET VisualStudioVersion=10.0

SET VisualStudioPath=&quot;%ProgramFiles(x86)%&#92;Microsoft Visual Studio 10.0&#92;Common7&#92;IDE&quot;
IF NOT EXIST %WINDIR%&#92;SysWow64 SET VisualStudioPath=&quot;%ProgramFiles%&#92;Microsoft Visual Studio 10.0&#92;Common7&#92;IDE&quot;

CD /D %VisualStudioPath%

VWDExpress.exe</pre>

<p>As you can see, the script changes the <font size="2" face="Courier New">VisualStudioVersion</font> to <font size="2" face="Courier New">10.0</font> then launches Visual Web Developer Express (there’s a little extra code to set the path correctly regardless of 32- or 64-bit versions of Windows).</p>

<p>Save the above script as a CMD file (i.e. <font size="2" face="Courier New">OpenVisualStudio2010.cmd</font>) and then make sure to right-click and <strong>Run as administrator</strong>! If you forget to run the script as administrator then Visual Studio won’t have the permissions needed to run the Windows Azure tools correctly.</p>

<p><a href="http://images.wadewegner.com/wordpress/2011/09/Running-Instance.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Running Instance" border="0" alt="Running Instance" src="http://images.wadewegner.com/wordpress/2011/09/Running-Instance_thumb.png" width="642" height="362" /></a></p>

<p>Look, it’s working!</p>

<p><strong>NOTE</strong>: I found myself having to reboot Windows 8 in order to resolve a problem where the debugger wouldn’t attach. Not sure if this occurs every time, but in case you have a similar issue just try rebooting.</p>

<p>I hope this helps!</p>
