--- 
layout: post
title: Windows Azure Toolkit for iOS Now Supports the Access Control Service
categories: 
- Access Control Service
- iOS
- Toolkit
- Windows Azure
tags: []

status: publish
type: post
published: true
meta: 
  dsq_thread_id: "609463115"
---
<p>Today we released an update to our <a href="https://github.com/microsoft-dpe/watoolkitios-lib" target="_blank">Windows Azure Toolkit for iOS</a> that provides some significant enhancements – in particular, we now provide support for using the <a href="http://acs.codeplex.com/" target="_blank">Windows Azure Access Control Server (ACS)</a> from an iOS application.&#160; You can get all the bits here:</p>  <ul>   <li>(updated) <a href="https://github.com/microsoft-dpe/watoolkitios-lib" target="_blank">watoolkitios-lib</a> </li>    <li>(updated) <a href="https://github.com/microsoft-dpe/watoolkitios-samples" target="_blank">watoolkitios-samples</a> </li>    <li>(updated) <a href="https://github.com/microsoft-dpe/watoolkitios-doc" target="_blank">watoolkitios-doc</a> </li>    <li>(new) <a href="https://github.com/microsoft-dpe/watoolkitios-configutility" target="_blank">watoolkitios-configutility</a> </li>    <li>(new) <a href="https://github.com/microsoft-dpe/cloudreadypackages" target="_blank">cloudreadypackages</a> </li> </ul>  <p>We first released this toolkit on May 6th, and since then we’ve released two minor updates and even accepted a <a href="http://www.wadewegner.com/2011/05/released-windows-azure-toolkit-for-ios-v1-0-1/" target="_blank">merge request from the community</a>.&#160; This toolkit has been a real pleasure to work on.&#160; Not only has it been to break out of the traditional Microsoft stack and learn about new languages and environments, but it’s also been great to introduce a lot of Objective-C and iOS developers to the power of Windows Azure.</p>  <p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="ACS &amp; iOS/iPhone" border="0" alt="ACS &amp; iOS/iPhone" src="http://images.wadewegner.com/wordpress/2011/08/HomeRealm.png" width="500" height="312" /></p>  <p>There are three key aspects to version 1.2 of the iOS toolkit:</p>  <ol>   <li>Cloud Ready Packages for Devices </li>    <li>Configuration Tool </li>    <li>Support for ACS </li> </ol>  <p>These three pieces are incredibly important when trying to develop iOS applications that use Windows Azure; consequently, let me try and explain each of these components and how they help to make development easier.</p>  <p><strong><u>Cloud Ready Packages for Devices</u></strong></p>  <p>One of the biggest challenges when using Windows Azure for an iOS developer today is the inability to create a package that can be deployed to Windows Azure.&#160; To make this easier, we have pre-built four Cloud Ready Packages for Devices so that you – the iOS developer – don’t have to setup Windows 7 and run CSPACK.&#160; Instead, you simply have to download the most appropriate cloud ready package, update the .CSCFG file, then deploy through the Windows Azure Portal.</p>  <p>We have four “flavors” of the Cloud Ready Packages:</p>  <ul>   <li>ACS + APNS – this version allows you to use the Access Control Service and register your certificate for the Apple Push Notification Service </li>    <li>ACS – this version allows you to use the Access Control Service </li>    <li>Membership + APNS – this version allows you to use a simple membership store in Windows Azure table storage for users and register your certificate for the Apple Push Notification Service </li>    <li>Membership – this version allows you to use a simple membership store in Windows Azure table storage for users </li> </ul>  <p>For more information on how to use and deploy these packages, take a look at this video on <a href="http://channel9.msdn.com/posts/Deploying-the-Cloud-Ready-Packages-for-Devices" target="_blank">deploying the Cloud Ready Packages for Devices</a>.</p>  <p><strong><u>Configuration Tool</u></strong></p>  <p>Along with the CSPKG you need a CSCFG to deploy your application to Windows Azure.&#160; The CSCFG file is an xml document that helps to describe elements of your application to Windows Azure so that it is able to correctly run your application.</p>  <p>In Visual Studio we have tools that make it easy to update the CSCFG file without having to open up the XML, but of course you cannot do this on a Mac.&#160; To make this easier, we created a tool that you can use on the Mac to walkthrough and generate the CSCFG file with all the appropriate details.&#160; Once created, you can use this CSCFG file along with the downloaded CSPKG file to deploy your application.</p>  <p><a href="http://images.wadewegner.com/wordpress/2011/07/iosconig.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="iosconig" border="0" alt="iosconig" src="http://images.wadewegner.com/wordpress/2011/07/iosconig_thumb.png" width="643" height="423" /></a></p>  <p>In addition to creating the CSCFG file, the configuration tool will also updated ACS with all the appropriate settings so that you can build &amp; run your application quickly.&#160; For all the details, please take a look at Vittorio Bertocci’s post on <a href="http://blogs.msdn.com/b/vbertocci/archive/2011/07/25/using-the-windows-azure-access-control-service-in-ios-applications.aspx" target="_blank">Using the Windows Azure Access Control Service in iOS Applications</a>.</p>  <p><strong><u>Support for ACS</u></strong></p>  <p>Everything I’ve described above is designed to make it easier for an iOS developer to quickly and easily use the Access Control Service.&#160; To use the library for authenticating to ACS, it’s really quite simple:</p>  <blockquote>   <pre class="code"><span style="color: #2e0d6e">NSLog</span><span style="color: black">(</span><span style="color: #c41a16">@&quot;Intializing the Access Control Client...&quot;</span><span style="color: black">);
</span><span style="color: #3f6e74">WACloudAccessControlClient </span><span style="color: black">*acsClient = [</span><span style="color: #3f6e74">WACloudAccessControlClient </span><span style="color: #26474b">accessControlClientForNamespace</span><span style="color: black">:</span><span style="color: #c41a16">@&quot;iostest-walkthrough&quot; </span><span style="color: #26474b">realm</span><span style="color: black">:</span><span style="color: #c41a16">@&quot;uri:wazmobiletoolkit&quot;</span><span style="color: black">];

[acsClient </span><span style="color: #26474b">showInViewController</span><span style="color: black">:</span><span style="color: #aa0d91">self</span><span style="color: black">.</span><span style="color: #3f6e74">viewController </span><span style="color: #26474b">allowsClose</span><span style="color: black">:</span><span style="color: #aa0d91">NO </span><span style="color: #26474b">withCompletionHandler</span><span style="color: black">:^(</span><span style="color: #aa0d91">BOOL </span><span style="color: black">authenticated) {
    </span><span style="color: #aa0d91">if </span><span style="color: black">(!authenticated)
    {
         </span><span style="color: #2e0d6e">NSLog</span><span style="color: black">(</span><span style="color: #c41a16">@&quot;Error authenticating&quot;</span><span style="color: black">);
    }
    </span><span style="color: #aa0d91">else
    </span><span style="color: black">{
         </span><span style="color: #2e0d6e">NSLog</span><span style="color: black">(</span><span style="color: #c41a16">@&quot;Creating the authentication token...&quot;</span><span style="color: black">);
         </span><span style="color: #3f6e74">WACloudAccessToken </span><span style="color: black">*token = [</span><span style="color: #3f6e74">WACloudAccessControlClient </span><span style="color: #26474b">sharedToken</span><span style="color: black">];
         </span><span style="color: #007400">/* Do something with the token here! */
    </span><span style="color: black">}
}];</span></pre>
</blockquote>

<p>I’ll post more walkthroughs and documentation shortly.</p>

<p>As always, please let me know what you think of the release!&#160; Your feedback is important to us, especially as it pertains to prioritizing future features and capabilities.</p>
